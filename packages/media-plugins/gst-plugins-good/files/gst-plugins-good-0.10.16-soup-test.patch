From 470f78cd2aa14ee6decf21b514b4cdd35abf52ec Mon Sep 17 00:00:00 2001
From: Marvin Schmidt <marvin_schmidt@gmx.net>
Date: Fri, 4 Sep 2009 13:51:37 +0200
Subject: [PATCH] checks: only run HTTPS test if libsoup has SSL support
Reason: souphttpsrc test fails with libsoup[-gnutls]
Upstream: Yes, http://cgit.freedesktop.org/gstreamer/gst-plugins-good/commit/?id=ffa63329cb1c264ad5395980e27907dc04bc0764

---
 tests/check/elements/souphttpsrc.c |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/tests/check/elements/souphttpsrc.c b/tests/check/elements/souphttpsrc.c
index 3c6f519..4e8032c 100644
--- a/tests/check/elements/souphttpsrc.c
+++ b/tests/check/elements/souphttpsrc.c
@@ -451,7 +451,6 @@ souphttpsrc_suite (void)
   suite_add_tcase (s, tc_chain);
   run_server (&http_port, &https_port);
   tcase_add_test (tc_chain, test_first_buffer_has_offset);
-  tcase_add_test (tc_chain, test_https);
   tcase_add_test (tc_chain, test_redirect_yes);
   tcase_add_test (tc_chain, test_redirect_no);
   tcase_add_test (tc_chain, test_not_found);
@@ -463,6 +462,8 @@ souphttpsrc_suite (void)
   tcase_add_test (tc_chain, test_good_user_digest_auth);
   tcase_add_test (tc_chain, test_bad_user_digest_auth);
   tcase_add_test (tc_chain, test_bad_password_digest_auth);
+  if (soup_ssl_supported)
+    tcase_add_test (tc_chain, test_https);
 
   suite_add_tcase (s, tc_internet);
   tcase_set_timeout (tc_internet, 250);
-- 
1.6.4.2

